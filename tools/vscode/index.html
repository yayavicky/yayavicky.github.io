<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>VS Code - Vicky's Notes</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="VS Code"><meta property="og:description" content="VS Code Go 扩展默认是使用大量的 Go 工具来提供各种功能的, 每个工具提供某个方面的能力, 比如代码提示是依靠 gocode 的.
不过微软在开发 VS Code 过程中, 定义一种协议, 语言服务器协议, Language Server Protocol.
这可是个好东西, 如果你需要开发编辑器或 IDE, 就不需要再为每种语言实现诸如自动完成, 代码提示等功能了, 直接利用 语言服务器协议 就行了.
gopls 就是官方的语言服务器, 当前处于 alpha 状态.
Remote Extensions  Remote - SSH Remote - Containers Remote - WSL  安装 SSH Client： Get-WindowsCapability -Online | ? Name -like 'OpenSSH*' Name : OpenSSH.Client~~~~0.0.1.0 State : NotPresent Name : OpenSSH.Server~~~~0.0.1.0 State : NotPresent Add-WindowsCapability -Online -Name OpenSSH."><meta property="og:type" content="article"><meta property="og:url" content="https://yayavicky.github.io/tools/vscode/"><meta property="article:section" content="tools"><meta property="article:published_time" content="2021-11-16T16:07:38+08:00"><meta property="article:modified_time" content="2021-11-16T16:07:38+08:00"><meta itemprop=name content="VS Code"><meta itemprop=description content="VS Code Go 扩展默认是使用大量的 Go 工具来提供各种功能的, 每个工具提供某个方面的能力, 比如代码提示是依靠 gocode 的.
不过微软在开发 VS Code 过程中, 定义一种协议, 语言服务器协议, Language Server Protocol.
这可是个好东西, 如果你需要开发编辑器或 IDE, 就不需要再为每种语言实现诸如自动完成, 代码提示等功能了, 直接利用 语言服务器协议 就行了.
gopls 就是官方的语言服务器, 当前处于 alpha 状态.
Remote Extensions  Remote - SSH Remote - Containers Remote - WSL  安装 SSH Client： Get-WindowsCapability -Online | ? Name -like 'OpenSSH*' Name : OpenSSH.Client~~~~0.0.1.0 State : NotPresent Name : OpenSSH.Server~~~~0.0.1.0 State : NotPresent Add-WindowsCapability -Online -Name OpenSSH."><meta itemprop=datePublished content="2021-11-16T16:07:38+08:00"><meta itemprop=dateModified content="2021-11-16T16:07:38+08:00"><meta itemprop=wordCount content="209"><meta itemprop=keywords content="Tools,GO,"><meta name=twitter:card content="summary"><meta name=twitter:title content="VS Code"><meta name=twitter:description content="VS Code Go 扩展默认是使用大量的 Go 工具来提供各种功能的, 每个工具提供某个方面的能力, 比如代码提示是依靠 gocode 的.
不过微软在开发 VS Code 过程中, 定义一种协议, 语言服务器协议, Language Server Protocol.
这可是个好东西, 如果你需要开发编辑器或 IDE, 就不需要再为每种语言实现诸如自动完成, 代码提示等功能了, 直接利用 语言服务器协议 就行了.
gopls 就是官方的语言服务器, 当前处于 alpha 状态.
Remote Extensions  Remote - SSH Remote - Containers Remote - WSL  安装 SSH Client： Get-WindowsCapability -Online | ? Name -like 'OpenSSH*' Name : OpenSSH.Client~~~~0.0.1.0 State : NotPresent Name : OpenSSH.Server~~~~0.0.1.0 State : NotPresent Add-WindowsCapability -Online -Name OpenSSH."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class="logo logo--mixed"><a class=logo__link href=/ title="Vicky's Notes" rel=home><div class="logo__item logo__imagebox"><img class=logo__img src=/img/spaw.jpg></div><div class="logo__item logo__text"><div class=logo__title>Vicky's Notes</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/tools/chocolatey/><span class=menu__text>Chocolatey</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>VS Code</h1><p class=post__lead>VS Code Setting</p><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>vicky</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-11-16T16:07:38+08:00>2021-11-16</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/tec/ rel=category>Tec</a>, <a class=meta__link href=/categories/documents/ rel=category>Documents</a></span></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#remote-extensions>Remote Extensions</a><ul><li><a href=#安装-ssh-client>安装 SSH Client：</a></li></ul></li><li><a href=#安装并设置-go-环境-gopls>安装并设置 GO 环境 gopls</a><ul><li><a href=#安装方式一>安装方式一</a></li><li><a href=#安装方式二>安装方式二</a></li><li><a href=#安装方式三>安装方式三</a></li><li><a href=#配置>配置</a></li></ul></li></ul></nav></div></div><div class="content post__content clearfix"><h1 id=vs-code>VS Code</h1><p>Go 扩展默认是使用大量的 Go 工具来提供各种功能的, 每个工具提供某个方面的能力, 比如代码提示是依靠 gocode 的.</p><p>不过微软在开发 VS Code 过程中, 定义一种协议, 语言服务器协议, <a href=%5Bhttps://microsoft.github.io/language-server-protocol/%5D(https://microsoft.github.io/language-server-protocol/)>Language Server Protocol</a>.</p><p>这可是个好东西, 如果你需要开发编辑器或 IDE, 就不需要再为每种语言实现诸如自动完成, 代码提示等功能了, 直接利用 <strong>语言服务器协议</strong> 就行了.</p><p>gopls 就是官方的语言服务器, 当前处于 alpha 状态.</p><h2 id=remote-extensions>Remote Extensions</h2><ul><li>Remote - SSH</li><li>Remote - Containers</li><li>Remote - WSL</li></ul><h3 id=安装-ssh-client>安装 SSH Client：</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Get-WindowsCapability -Online | ? Name <span style=color:#f92672>-like</span> <span style=color:#e6db74>&#39;OpenSSH*&#39;</span>
Name  <span style=color:#960050;background-color:#1e0010>:</span> OpenSSH.Client~~~~0.0.1.0
State <span style=color:#960050;background-color:#1e0010>:</span> NotPresent
Name  <span style=color:#960050;background-color:#1e0010>:</span> OpenSSH.Server~~~~0.0.1.0
State <span style=color:#960050;background-color:#1e0010>:</span> NotPresent

Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=color:#66d9ef>cd</span> %USERPROFILE%/.ssh

ssh-keygen -t rsa -b 4096

<span style=color:#66d9ef>SET</span> REMOTEHOST=your-user-name-on-host@host-fqdn-or-ip-goes-here

scp %USERPROFILE%\.ssh\id_rsa.pub %REMOTEHOST%:~/tmp.pub
ssh %REMOTEHOST% <span style=color:#e6db74>&#34;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; cat ~/tmp.pub &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys &amp;&amp;  rm -f ~/tmp.pub&#34;</span>
</code></pre></div><p>vscode <code>ctrl + shift + p</code>, 搜索 remote</p><h2 id=安装并设置-go-环境-gopls>安装并设置 GO 环境 gopls</h2><h3 id=安装方式一>安装方式一</h3><p>打开 VS Code 的设置, 搜索 <code>go.useLanguageServe</code>, 并勾选上. 默认情况下, Go 扩展会提示你安装 gopls.</p><p>如果长时间安装不上, 可以尝试手动安装, <a href="https://link.zhihu.com/?target=https%3A//github.com/golang/tools/blob/master/gopls/doc/user.md">官方安装指南</a>.</p><h3 id=安装方式二>安装方式二</h3><p><a href=https://github.com/golang/tools/tree/master/gopls>https://github.com/golang/tools/tree/master/gopl</a>下载, 然后使用 <code>go install github.com/golang/tools/cmd/gopls</code> 安装.</p><h3 id=安装方式三>安装方式三</h3><p>网络好, 或者设置 goproxy 代理后, 可以直接手动安装 gopls, 官方提示不要使用 -u.</p><p><code>go get golang.org/x/tools/gopls@latest</code></p><h3 id=配置>配置</h3><p>装完之后, 添加如下的配置, 如果使用第一种安装方式, 那么第一行已经存在了:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#e6db74>&#34;go.useLanguageServer&#34;</span>: **true**,
<span style=color:#e6db74>&#34;[go]&#34;</span>: <span style=color:#f92672>{</span>
    <span style=color:#e6db74>&#34;editor.snippetSuggestions&#34;</span>: <span style=color:#e6db74>&#34;none&#34;</span>,
    <span style=color:#e6db74>&#34;editor.formatOnSave&#34;</span>: **true**,
    <span style=color:#e6db74>&#34;editor.codeActionsOnSave&#34;</span>: <span style=color:#f92672>{</span>
        <span style=color:#e6db74>&#34;source.organizeImports&#34;</span>: **true**<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>,
<span style=color:#e6db74>&#34;gopls&#34;</span>: <span style=color:#f92672>{</span>
    <span style=color:#e6db74>&#34;usePlaceholders&#34;</span>: **true**, // add parameter placeholders when completing a <span style=color:#66d9ef>function</span>
    <span style=color:#e6db74>&#34;wantCompletionDocumentation&#34;</span>: **true** // <span style=color:#66d9ef>for</span> documentation in completion items
<span style=color:#f92672>}</span>,
<span style=color:#e6db74>&#34;files.eol&#34;</span>: <span style=color:#e6db74>&#34;\n&#34;</span>, // formatting only supports LF line endings
</code></pre></div><p>如果你需要在不同的编辑器中使用 gopls, 请参考官方安装文档中的设置.</p><p>目前支持以下的编辑器:</p><ul><li>VSCode</li><li>Vim / Neovim</li><li>Emacs</li><li>Acme</li><li>Sublime Text</li></ul></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/tools/ rel=tag>Tools</a></li><li class=tags__item><a class="tags__link btn" href=/tags/go/ rel=tag>GO</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="vicky avatar" src=/img/cat.jpg class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About vicky</span></div><div class=authorbox__description>.</div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/tools/hugo/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Hugo</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/tools/chocolatey/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Chocolatey</p></a></div></nav></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><label><input class=widget-search__field type=search placeholder=SEARCH… name=q aria-label=SEARCH…></label>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://yayavicky.github.io/></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/code/python/>Python</a></li><li class=widget__item><a class=widget__link href=/env/win10fix/>Win10fix</a></li><li class=widget__item><a class=widget__link href=/code/backupfile/>Backup Files</a></li><li class=widget__item><a class=widget__link href=/env/utf8bom/>Utf8bom</a></li><li class=widget__item><a class=widget__link href=/env/nas/>群晖设置</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/code/ title=Code>Code</a>
<a class="widget-taglist__link widget__link btn" href=/tags/coding/ title=coding>coding</a>
<a class="widget-taglist__link widget__link btn" href=/tags/env/ title=Env>Env</a>
<a class="widget-taglist__link widget__link btn" href=/tags/go/ title=GO>GO</a>
<a class="widget-taglist__link widget__link btn" href=/tags/install/ title=Install>Install</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=Linux>Linux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/script/ title=Script>Script</a>
<a class="widget-taglist__link widget__link btn" href=/tags/setting/ title=Setting>Setting</a>
<a class="widget-taglist__link widget__link btn" href=/tags/system/ title=system>system</a>
<a class="widget-taglist__link widget__link btn" href=/tags/thoughts/ title=Thoughts>Thoughts</a>
<a class="widget-taglist__link widget__link btn" href=/tags/tools/ title=Tools>Tools</a>
<a class="widget-taglist__link widget__link btn" href=/tags/version/ title=Version>Version</a>
<a class="widget-taglist__link widget__link btn" href=/tags/web/ title=Web>Web</a></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/code/pdfcombine/>Pdf Combine</a> | <a class=footer__link href=/code/python/>Python</a></div><div class=footer__copyright>&copy; 2022 © 2021 Vicky's Notes..
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script><script src=/js/custom.js></script></body></html>