<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python Speed - Vicky's Notes</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Python Speed"><meta property="og:description" content="What blocks Ruby, Python to get Javascript V8 speed?
What blocks Ruby, Python to get Javascript V8 speed?
Are there any Ruby / Python features that are blocking implementation of optimizations (e.g. inline caching) V8 engine has?
Python is co-developed by Google guys so it shouldn&rsquo;t be blocked by software patents.
Or this is rather matter of resources put into the V8 project by Google.
 Nothing.
Well, okay: money. (And time, people, resources, but if you have money, you can buy those."><meta property="og:type" content="article"><meta property="og:url" content="https://yayavicky.github.io/thoughts/pythonspeed/"><meta property="article:section" content="thoughts"><meta property="article:published_time" content="2021-11-30T11:07:27+08:00"><meta property="article:modified_time" content="2021-11-30T11:07:27+08:00"><meta itemprop=name content="Python Speed"><meta itemprop=description content="What blocks Ruby, Python to get Javascript V8 speed?
What blocks Ruby, Python to get Javascript V8 speed?
Are there any Ruby / Python features that are blocking implementation of optimizations (e.g. inline caching) V8 engine has?
Python is co-developed by Google guys so it shouldn&rsquo;t be blocked by software patents.
Or this is rather matter of resources put into the V8 project by Google.
 Nothing.
Well, okay: money. (And time, people, resources, but if you have money, you can buy those."><meta itemprop=datePublished content="2021-11-30T11:07:27+08:00"><meta itemprop=dateModified content="2021-11-30T11:07:27+08:00"><meta itemprop=wordCount content="1005"><meta itemprop=keywords content="Thoughts,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python Speed"><meta name=twitter:description content="What blocks Ruby, Python to get Javascript V8 speed?
What blocks Ruby, Python to get Javascript V8 speed?
Are there any Ruby / Python features that are blocking implementation of optimizations (e.g. inline caching) V8 engine has?
Python is co-developed by Google guys so it shouldn&rsquo;t be blocked by software patents.
Or this is rather matter of resources put into the V8 project by Google.
 Nothing.
Well, okay: money. (And time, people, resources, but if you have money, you can buy those."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class="logo logo--mixed"><a class=logo__link href=/ title="Vicky's Notes" rel=home><div class="logo__item logo__imagebox"><img class=logo__img src=/img/spaw.jpg></div><div class="logo__item logo__text"><div class=logo__title>Vicky's Notes</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/tools/commontools/><span class=menu__text>常用工具</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Python Speed</h1><p class=post__lead>是什么阻止了Ruby和Python获得Javascript V8那样的速度？</p><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>vicky</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-11-30T11:07:27+08:00>2021-11-30</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/python/ rel=category>Python</a>, <a class=meta__link href=/categories/thoughts/ rel=category>Thoughts</a></span></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#experience>Experience</a></li><li><a href=#resources>Resources</a></li><li><a href=#objectives>Objectives</a></li></ul></nav></div></div><div class="content post__content clearfix"><p><a href=https://stackoverflow.com/questions/5168718/what-blocks-ruby-python-to-get-javascript-v8-speed>What blocks Ruby, Python to get Javascript V8 speed?</a></p><p>What blocks Ruby, Python to get Javascript V8 speed?</p><p>Are there any Ruby / Python features that are blocking implementation of optimizations (e.g. inline caching) V8 engine has?</p><p>Python is co-developed by Google guys so it shouldn&rsquo;t be blocked by software patents.</p><p>Or this is rather matter of resources put into the V8 project by Google.</p><hr><p>Nothing.</p><p>Well, okay: money. (And time, people, resources, but if you have money, you can buy those.)</p><p>V8 has a team of brilliant, highly-specialized, highly-experienced (and thus highly-paid) engineers working on it, that have decades of experience (I&rsquo;m talking individually – collectively it&rsquo;s more like centuries) in creating high-performance execution engines for dynamic OO languages. They are basically the same people who also created the Sun HotSpot JVM (among many others).</p><p>Lars Bak, the lead developer, has been literally working on VMs for 25 years (and all of those VMs have lead up to V8), which is basically his entire (professional) life. Some of the people writing Ruby VMs aren&rsquo;t even 25 years old.</p><hr><p>A good part of it has to do with community. Python and Ruby for the most part have no corporate backing. No one gets paid to work on Python and Ruby full-time (and they especially don&rsquo;t get paid to work on CPython or MRI the whole time). V8, on the other hand, is backed by the most powerful IT company in the world.</p><p>Furthermore, V8 can be faster because the only thing that matters to the V8 people is the interpreter &ndash; they have no standard library to work on, no concerns about language design. They just write the interpreter. That&rsquo;s it.</p><p>It has nothing to do with intellectual property law. Nor is Python co-developed by Google guys (its creator works there along with a few other committers, but they don&rsquo;t get paid to work on Python).</p><p>Another obstacle to Python speed is Python 3. Its adoption seems to be the main concern of the language developers &ndash; to the point that they have frozen development of new language features until other implementations catch up.</p><p>On to the technical details, I don&rsquo;t know much about Ruby, but Python has a number of places where optimizations could be used (and Unladen Swallow, a Google project, started to implement these before biting the dust). Here are some of the optimizations that they planned. I could see Python gaining V8 speed in the future if a JIT a la PyPy gets implemented for CPython, but that does not seem likely for the coming years (the focus right now is Python 3 adoption, not a JIT).</p><p>Many also feel that Ruby and Python could benefit immensely from removing their respective global interpreter locks.</p><p>You also have to understand that Python and Ruby are both much heavier languages than JS &ndash; they provide far more in the way of standard library, language features, and structure. The class system of object-orientation alone adds a great deal of weight (in a good way, I think). I almost think of Javascript as a language designed to be embedded, like Lua (and in many ways, they are similar). Ruby and Python have a much richer set of features, and that expressiveness is usually going to come at the cost of speed.</p><hr><p>The statement is not exactly true
Just like V8 is just an implementation for JS, CPython is just one implementation for Python. Pypy has performances matching V8&rsquo;s.</p><p>Also, there the problem of perceived performance : since V8 is natively non blocking, Web dev leads to more performant projects because you save the IO wait. And V8 is mainly used for dev Web where IO is key, so they compare it to similar projects. But you can use Python in many, many other areas than web dev. And you can even use C extensions for a lot of tasks, such as scientific computations or encryption, and crunch data with blazing perfs.</p><p>But on the web, most popular Python and Ruby projects are blocking. Python, especially, has the legacy of the synchronous WSGI standard, and frameworks like the famous Django are based on it.</p><p>You can write asynchronous Python (like with Twisted, Tornado, gevent or asyncio) or Ruby. But it&rsquo;s not done often. The best tools are still blocking.</p><p>However, they are some reasons for why the default implementations in Ruby and Python are not as speedy as V8.</p><h2 id=experience>Experience</h2><p>Like Jörg W Mittag pointed out, the guys working on V8 are VM geniuses. Python is dev by a bunch a passionate people, very good in a lot of domains, but are not as specialized in VM tuning.</p><h2 id=resources>Resources</h2><p>The Python Software foundation has very little money : <a href=http://pyfound.blogspot.fr/2012/01/psf-grants-over-37000-to-python.html>less than 40k</a> in a year to invest in Python. This is kinda crazy when you think big players such as Google, Facebook or Apple are all using Python, but it&rsquo;s the ugly truth : most work is done for free. The language that powers Youtube and existed before Java has been handcrafted by volunteers.</p><p>They are smart and dedicated volunteers, but when they identify they need more juice in a field, they can&rsquo;t ask for 300k to hire a top notch specialist for this area of expertise. They have to look around for somebody who would do it for free.</p><p>While this works, it means you have to be very a careful about your priorities. Hence, now we need to look at :</p><h2 id=objectives>Objectives</h2><p>Even with the latest modern features, writing Javascript is terrible. You have scoping issues, very few collections, terrible string and array manipulation, almost no stdlist apart from date, maths and regexes, and no syntactic sugar even for very common operations.</p><p>But in V8, you&rsquo;ve got speed.</p><p>This is because, speed was the main objective for Google, since it&rsquo;s a bottleneck for page rendering in Chrome.</p><p>In Python, usability is the main objective. Because it&rsquo;s almost never the bottleneck on the project. The scarce resource here is developer time. It&rsquo;s optimized for the developer.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/thoughts/ rel=tag>Thoughts</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="vicky avatar" src=/img/cat.jpg class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About vicky</span></div><div class=authorbox__description>.</div></div></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><label><input class=widget-search__field type=search placeholder=SEARCH… name=q aria-label=SEARCH…></label>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://yayavicky.github.io/></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/res/svg/>SVG Resource</a></li><li class=widget__item><a class=widget__link href=/tools/commontools/>常用工具</a></li><li class=widget__item><a class=widget__link href=/code/python/>Python</a></li><li class=widget__item><a class=widget__link href=/env/win10fix/>Win10fix</a></li><li class=widget__item><a class=widget__link href=/code/backupfile/>Backup Files</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/code/ title=Code>Code</a>
<a class="widget-taglist__link widget__link btn" href=/tags/coding/ title=coding>coding</a>
<a class="widget-taglist__link widget__link btn" href=/tags/env/ title=Env>Env</a>
<a class="widget-taglist__link widget__link btn" href=/tags/go/ title=GO>GO</a>
<a class="widget-taglist__link widget__link btn" href=/tags/install/ title=Install>Install</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=Linux>Linux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/resource/ title=Resource>Resource</a>
<a class="widget-taglist__link widget__link btn" href=/tags/script/ title=Script>Script</a>
<a class="widget-taglist__link widget__link btn" href=/tags/setting/ title=Setting>Setting</a>
<a class="widget-taglist__link widget__link btn" href=/tags/system/ title=system>system</a>
<a class="widget-taglist__link widget__link btn" href=/tags/thoughts/ title=Thoughts>Thoughts</a>
<a class="widget-taglist__link widget__link btn" href=/tags/tools/ title=Tools>Tools</a>
<a class="widget-taglist__link widget__link btn" href=/tags/version/ title=Version>Version</a>
<a class="widget-taglist__link widget__link btn" href=/tags/web/ title=Web>Web</a></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/code/pdfcombine/>Pdf Combine</a> | <a class=footer__link href=/code/python/>Python</a></div><div class=footer__copyright>&copy; 2022 © 2021 Vicky's Notes..
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script><script src=/js/custom.js></script></body></html>